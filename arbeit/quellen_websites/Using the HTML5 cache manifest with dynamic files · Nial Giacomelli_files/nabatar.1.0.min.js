/*!
* Nabatar - v1.0 - 06/04/2012
* http://nial.me/
* 
* Copyright (c) 2012 Nial Giacomelli
* Dual licensed under the MIT and GPL licenses.
*
* ----
*
* Nabatar makes use of a highly edited version 
* of the following wonderful jQuery plugin:
*
* jQuery replaceText - v1.1 - 11/21/2009
* http://benalman.com/projects/jquery-replacetext-plugin/
* 
* Copyright (c) 2009 "Cowboy" Ben Alman
* Dual licensed under the MIT and GPL licenses.
* http://benalman.com/about/license/
*/
(function($){$.fn.nabatar=function(b){var c=$.extend({matchTwitter:true,twitterPrefix:"@",matchFacebook:true,facebookPrefix:"fb:",ignoreChildrenOf:["code"],onError:function(){$(this).css("display","none")}},b);return this.each(function(){if(c.matchTwitter){var e=new RegExp(c.twitterPrefix+"([a-zA-Z0-9_]{1,15})","igm");var d='<a href="https://twitter.com/#!/$1" class="nabatar-link nabatar-facebook-link" title="$1"><img src="https://api.twitter.com/1/users/profile_image/$1?size=normal" class="nabatar-avatar" alt="$1"></img><span class="nabatar-label">$1</span></a>';a(this,e,d,c.ignoreChildrenOf)}if(c.matchFacebook){var e=new RegExp(c.facebookPrefix+"([a-z\d.]{5,})","igm");var d='<a href="http://www.facebook.com/$1" class="nabatar-link nabatar-facebook-link" title="$1"><img src="http://graph.facebook.com/$1/picture" class="nabatar-avatar" alt="$1"></img><span class="nabatar-label">$1</span></a>';a(this,e,d,c.ignoreChildrenOf)}$("img.nabatar-avatar").error(c.onError)});function a(d,k,e,l){var h=d.firstChild,g,f,i=[];var j=function(){return(jQuery.inArray(this.tagName.toLowerCase(),l)>-1)};if(h){do{if(h.nodeType===3){if($(h).parents().is(j)){continue}g=h.nodeValue;f=g.replace(k,e);if(f!==g){if(/</.test(f)){$(h).before(f);i.push(h)}else{h.nodeValue=new_val}}}}while(h=h.nextSibling)}i.length&&$(i).remove()}}})(jQuery);